### HTTPS Proxy for Jenkins
Установим пакеты, необходимые для работы Jenkins, с помощью команды:
````
sudo apt install -y apache2 apt-transport-https certbot python3-certbot-apache
````
Настроим Apache для последующей работы с панелью управления Jenkins.
Включаем модуль веб-сервера Apache под названием “headers” с помощью команды:
````
sudo a2enmod headers
````
Включаем модуль веб-сервера Apache под названием “proxy_http” с помощью команды:
````
sudo a2enmod proxy_http
````
Включаем модуль веб-сервера Apache под названием “proxy_http” с помощью команды:
````
sudo a2enmod proxy_http
````
Включаем модуль веб-сервера Apache под названием “rewrite” с помощью команды:
````
sudo a2enmod rewrite
````
Теперь нужно создать два файла виртуальных хостов (в Nginx называется блок), с которыми в дальнейшем будет работать Jenkins.
Два файла виртуальных хостов потребуются для обеспечения доступа к Jenkins по HTTPS, а также для реализации возможности использования Jenkins по адресу https://jenkins.youdomain.net, без указания порта 8080 в адресной строке браузера.
В данном руководстве для доступа к Jenkins из сети Интернет будет использоваться субдомен jenkins.youdomain.net. Вам нужно будет указать ваш домен или субдомен, по которому ваш Jenkins будет доступен из сети Интернет.
Создадим первый файл виртуального хоста, воспользовавшись текстовым редактором, с помощью команды:
````
sudo nano /etc/apache2/sites-available/jenkins.youdomain.net.conf
````
Создадим второй файл виртуального хоста, воспользовавшись текстовым редактором, с помощью команды:
````
sudo nano /etc/apache2/sites-available/jenkins.youdomain.net-ssl.conf
````
В данном руководстве для доступа к Jenkins из сети Интернет будет использоваться субдомен jenkins.youdomen.net. Вам нужно будет указать ваш домен или субдомен, по которому ваш Jenkins будет доступен из сети Интернет.
Активируем первый виртуальный хост с помощью команды:
````
sudo a2ensite jenkins.heyvaldemar.net.conf
````
Активируем второй виртуальный хост с помощью команды:
````
sudo a2ensite jenkins.heyvaldemar.net-ssl.conf
````
Деактивируем виртуальный хост, созданный по умолчанию, с помощью команды:
````
sudo a2dissite 000-default.conf
````
Убедимся, что в синтаксисе нового конфигурационного файла Apache нет ошибок, с помощью команды:
````
sudo apache2ctl configtest
````
Перезапустим Apache, чтобы применить внесенные изменения, с помощью команды:
````
sudo systemctl restart apache2
````
Проверим, что Apache успешно запустился, с помощью команды:
````
sudo systemctl status apache2
````
Теперь, чтобы повысить уровень безопасности веб-сервера, необходимо получить криптографический сертификат для домена или субдомена, 
по которому панель управления Jenkins будет доступна из сети Интернет.

Запросим криптографический сертификат с помощью команды:
````
sudo certbot --apache -d jenkins.youdomain.net
````
На следующем этапе необходимо прочитать и принять условия использования предоставляемых сервисов.
Нажимаем на кнопку “a”, затем “Enter”, если вы согласны с условиями использования предоставляемых сервисов.
Далее указываем адрес электронной почты, на который Let’s Encrypt будет присылать уведомления об истечении срока
криптографического сертификата, и нажимаем на кнопку “Enter”.

Проверить работоспособность процесса обновления криптографического сертификата можно с помощью команды:
````
sudo certbot renew --dry-run
````
Теперь установим Jenkins с помощью команды:
````
sudo apt install -y jenkins
````
Установка Jenkins на Ubuntu Server
Теперь необходимо внести изменения в конфигурационный файл Jenkins, открыв его в текстовом редакторе с помощью команды:
````
sudo nano /etc/default/jenkins
````
Установка Jenkins на Ubuntu Server
Нажимаем на кнопку “i”, чтобы перейти в режим редактирования, находим строку
````
JENKINS_ARGS=”–webroot=/var/cache/$NAME/war –httpPort=$HTTP_PORT”
````
и добавляем параметр
````
–httpListenAddress=127.0.0.1
````
Перезапустим Jenkins, чтобы применить внесенные изменения, с помощью команды:
````
sudo systemctl restart jenkins
````
